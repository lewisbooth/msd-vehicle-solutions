"use strict";function setState(e){formState=e,renderForm()}function getState(){for(var e={},t=0;t<fieldsets.length;t++){for(var r=fieldsets[t].getAttribute("name"),n=fieldsets[t].querySelectorAll("input"),o={},i=0;i<n.length;i++){var c=n[i].getAttribute("name"),a=null!==n[i].getAttribute("checked");o[c]={checked:a}}e[r]=o,console.log(o,r)}return e}function renderForm(){priceOutput.innerHTML=getPrice();for(var e=0;e<fieldsets.length;e++)for(var t=fieldsets[e].getAttribute("name"),r=fieldsets[e].querySelectorAll("input"),n=0;n<r.length;n++){var o=r[n].getAttribute("name");!0===formState[t][o].checked?r[n].setAttribute("checked",!0):r[n].removeAttribute("checked")}!0===carInput.checked?(carBlock.classList.remove("hidden"),vanBlock.classList.add("hidden")):(vanBlock.classList.remove("hidden"),carBlock.classList.add("hidden"))}function checkInput(e){var t=JSON.parse(JSON.stringify(formState)),r=e.target.getAttribute("name"),n=e.target.parentElement.getAttribute("name");for(var o in t[n]){var i=o===r;t[n][o].checked=i}setState(t)}function getPrice(){var e=JSON.parse(JSON.stringify(formState));for(var t in e){for(var r in e[t])!1===e[t][r].checked&&delete e[t][r];e[t]=Object.keys(e[t])[0]}var n=e["vehicle-type"],o=e[n+"-size"],i=e.days,c=prices[n][o];if(void 0!==discounts[i]){var a=1-discounts[i]/100;c=Math.floor(c*a)}return"Â£"+c}function moveForm(){window.innerWidth<1024?topSection.insertBefore(quoteForm,mobileLocation):aside.insertBefore(quoteForm,callToBook)}function insertAfter(e,t){t.parentNode.insertBefore(e,t.nextSibling)}var prices={van:{"van-small":50,"van-medium":70,"van-large":90,"van-luton":105},car:{"car-economy":35,"car-saloon":45,"car-suv":55,"car-truck":65}},discounts={"3-7":10,"8-14":15,"15+":20},form=document.forms["instant-quote"],fieldsets=form.querySelectorAll(".options"),inputs=form.querySelectorAll("input"),priceOutput=form.querySelector("output"),aside=document.querySelector("aside"),mobileLocation=document.querySelector("article"),callToBook=aside.querySelector(".call-to-book"),quoteForm=document.querySelector(".instant-quote"),topSection=document.querySelector("article").parentNode,vanBlock=form.querySelector("[name=van-size]").parentElement,carBlock=form.querySelector("[name=car-size]").parentElement,vanInput=form.querySelector("[name=van]"),carInput=form.querySelector("[name=car]");form.addEventListener("submit",function(e){return e.preventDefault()});for(var i=0;i<inputs.length;i++)inputs[i].addEventListener("click",function(e){return checkInput(e)});var formState=getState();renderForm(),moveForm(),window.addEventListener("resize",function(){moveForm()});